---
const experience = [
  {
    company: "Boliglobos Latino",
    position: "Frontend Developer",
    summary:
      "Technology solutions lead in charge of digital architecture and process automation to optimize company operations and sales.",
    highlights: [
      "Designed and developed the corporate website and E-commerce platform, centralizing the brand's digital presence",
      "Implemented and managed the E-learning platform using Odoo, streamlining digital training and content access",
      "Developed a custom digital certificate system integrated into the website, automating document generation and delivery",
      "Led the implementation of Escala (CRM) for communication workflows and WhatsApp automation, improving customer service efficiency",
      "Integrated the Odoo ecosystem to provide unified management for sales, learning, and web administration",
    ],
  },
  {
    company: "Alcaldía de Neiva",
    position: "Webmaster",
    summary:
      "Progressed from Intern to full-time Software Engineer within the Webmaster department, leading the modernization of institutional portals and user interface optimization.",
    highlights: [
      "Led the modernization of the CSS architecture for the Secretary's web portals, enhancing User Experience (UX) and mobile responsiveness.",
      "Managed the maintenance and updates of critical content on the institutional website following Digital Government standards.",
    ],
  },
  {
    company: "KODLAND",
    position: "Programming Instructor (LUA / Roblox Studio)",
    summary:
      "Technical instructor responsible for teaching programming fundamentals and game development to children, fostering logical thinking and technical creativity.",
    highlights: [
      "Delivered interactive programming lessons using LUA and Roblox Studio, simplifying complex coding concepts for students aged 8 to 12.",
      "Designed and supervised game development projects, guiding students through script implementation, mechanics, and environment design",
      "Promoted the development of problem-solving skills and algorithmic logic using project-based learning methodologies",
      "Managed student groups in a virtual environment, ensuring pedagogical goals were met while maintaining high engagement levels",
    ],
  },
];
---

<section id="experience">
  <h2>EXP<span>ERIENCE</span></h2>
  <div class="grid">
    {
      experience.map((element, index) => (
        <article class="card-glass flex-column">
          <h3>{element.company}</h3>
          <p class="position">{element.position}</p>
          <p>{element.summary}</p>

          <button
            class="toggle-btn"
            data-target={`highlights-${index}`}
            aria-expanded="false"
          >
            <span class="btn-text">Details</span>
            <i class="bi bi-chevron-down icon" />
          </button>

          <ul class="highlights" id={`highlights-${index}`}>
            {element.highlights.map((highlight) => (
              <li class="highlight">● {highlight}</li>
            ))}
          </ul>
        </article>
      ))
    }
  </div>
</section>

<style>
  h2 {
    text-align: left;
    width: 100%;
    margin-bottom: 10px;
  }

  .grid {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    align-items: stretch;
  }

  .card-glass {
    padding: 20px;
    gap: 10px;
    width: 100%;
    max-width: 100%;
    align-items: start;
  }

  .btn-text {
    color: #fff;
    transition: var(--transition);
  }

  .card-glass h3 {
    font-size: 1.3rem;
    padding-left: 0;
    text-indent: 0;
  }

  .card-glass p.position {
    margin-top: -10px;
    transition: var(--transition);
  }

  /* Botón de toggle */
  .toggle-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background-color: transparent;
    background-color: #ffffff05;
    border: solid 1px var(--clr-border);
    border-radius: 100px;
    font-size: 0.85rem;
    font-weight: 500;
    letter-spacing: 1px;
    text-indent: 1px;
    cursor: pointer;
    transition: var(--transition);
    margin-top: 5px;
  }

  .toggle-btn .icon {
    font-size: 14px;
    transition: transform var(--transition-md);
  }

  .toggle-btn[aria-expanded="true"] .icon {
    transform: rotate(180deg);
  }

  /* Lista de highlights */
  .highlights {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition:
      max-height 0.4s ease,
      opacity 0.3s ease,
      margin-top 0.3s ease;
    margin-top: 0;
  }

  .highlights.active {
    max-height: 1000px;
    opacity: 1;
    margin-top: 10px;
  }

  .highlight {
    padding: 10px 15px;
    width: 100%;
    border-radius: 15px;
    background-color: #ffffff03;
    /* border: solid 1px var(--clr-border); */
  }

  @media (hover: hover) {
    .toggle-btn:hover .btn-text {
      color: var(--clr-primary);
    }

    .card-glass:hover .position {
      color: #fff;
      letter-spacing: 1px;
    }
  }

  /* DESKTOP - A partir de 750px */
  @media (min-width: 750px) {
    .grid {
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
    }
  }
</style>

<script>
  //@ts-nocheck
  document.addEventListener("DOMContentLoaded", () => {
    const toggleButtons = document.querySelectorAll(".toggle-btn");

    toggleButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const targetId = button.getAttribute("data-target");
        const highlightsList = document.getElementById(targetId);
        const isExpanded = button.getAttribute("aria-expanded") === "true";
        const btnText = button.querySelector(".btn-text");

        // Toggle aria-expanded
        button.setAttribute("aria-expanded", !isExpanded);

        // Toggle active class
        highlightsList.classList.toggle("active");
      });
    });
  });
</script>
